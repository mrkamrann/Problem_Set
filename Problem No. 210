/*
Link: https://codeforces.com/contest/241/problem/B

Camella has friend_count friends and wants to take picture_count pictures of them. Each picture should contain exactly two of her friends, and no two pictures 
should feature the same pair of friends. For example, if Camella has friend_count = 3 friends, she can take 3 different pictures, each containing a unique pair 
of friends.

Each friend has an attractiveness level specified by the integer ai for the i-th friend. The attractiveness of a picture containing the i-th and j-th friends is 
defined as the exclusive-or (xor operation) of integers ai and aj.

Camella wants to take pictures in such a way that the total sum of attractiveness of her pictures is maximized. You need to calculate this value. Since the result 
may not fit in a 32-bit integer, print it modulo 1000000007 (10^9 + 7).

Create a C++ function MaximizePictureAttractiveness that will return an integer denoting the optimal total sum of attractiveness of Camella's pictures.

Use appropriate error handling using the stdexcept library for invalid test cases.

Input Type
An integer denoting friend_count
An integer denoting picture_count
A vector of integers denoting attractiveness_values

Input Constraints

The value of friend_count should be at least 2 and at most 100,000 inclusive.
The value of picture_count should be at least 1 and at most friend_count * (friend_count - 1) / 2 inclusive.
Each value in attractiveness_values should be in the range [0, 10^9] inclusive.

*/

#include <iostream>
#include <vector>
#include <map>
#include <stdexcept>
#include <algorithm>
#include <cassert>

const int modulus = 1000000007;

long long MaximizePictureAttractiveness(int picture_count, std::vector<int>& attractiveness_values) {

    int friend_count = attractiveness_values.size();

    if (friend_count < 1 || friend_count > 50000) {
        throw std::invalid_argument("friend_count must lie between 1 to 50000");
    }
    if (picture_count < 0 || picture_count > (1LL * friend_count*(friend_count - 1))/2 ){
        throw std::invalid_argument("picture_count must lie between 0 to friend_count*(friend_count - 1)/2 ");
    }
    for (int value : attractiveness_values) {
        if (value < 0 || value > 1000000000) {
            throw std::invalid_argument("attractiveness values must be between 0 and 1000000000");
        }
    }

    int bit_count = 0;

    for (int bit_position = 29; bit_position >= 0; bit_position--) {
        std::map<int, int> bit_hash;
        int pair_count = 0;

        for (int i = 0; i < friend_count; i++) {
            bit_hash[attractiveness_values[i] >> bit_position]++;
        }

        bit_count <<= 1;

        for (std::map<int, int>::const_iterator it = bit_hash.begin(); it != bit_hash.end(); ++it) {
            int x_val = it->first;
            int y_val = (bit_count + 1) ^ x_val;
            if (x_val < y_val) {
                pair_count += it->second * bit_hash[y_val];
            }
        }

        if (pair_count >= picture_count) {
            bit_count++;
        } else {
            picture_count -= pair_count;
        }
    }

    long long total_sum = 0;
    std::sort(attractiveness_values.begin(), attractiveness_values.end());

    for (int i = 0; i < friend_count; i++) {
        for (int j = i + 1; j < friend_count; j++) {
            int xor_value = attractiveness_values[i] ^ attractiveness_values[j];
            if (xor_value > bit_count) {
                total_sum += xor_value;
            }
        }
    }

    return (total_sum + 1LL * picture_count * bit_count) % modulus;
}

#include <iostream>
#include <vector>
#include <map>
#include <stdexcept>
#include <algorithm>
#include <cassert>

int main() {
    int friend_count, picture_count;
    std::cin >> friend_count >> picture_count;

    
    std::vector<int> attractiveness_values(friend_count);
    for (int i = 0; i < friend_count; i++) {
        std::cin >> attractiveness_values[i];
        if (attractiveness_values[i] < 0 || attractiveness_values[i] > 1000000000) {
            throw std::invalid_argument("Invalid input value for attractiveness_values");
        }
    }

    long long result = CalculateSolution(friend_count, picture_count, attractiveness_values);
    std::cout << result << std::endl;

    return 0;
}

